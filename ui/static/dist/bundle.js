(()=>{"use strict";function t(t){let e=document.getElementById("mandatoryFieldsNotFilledAlert");"show"===t?e.style.display="block":"hide"===t&&(e.style.display="none")}function e(t){!function(t){let e=document.getElementById("backendServiceErrorAlert");e.innerHTML=`Backend service error: ${t}`,e.style.display="block"}(t),toggleBackendServiceErrorAlert("show"),toggleSubmitButtonWhileLoadingResults("show")}const n=[{componentId:"stringsToMatch",componentNameForAlertMessage:'"strings to match" textarea'},{componentId:"stringsToMatchIn",componentNameForAlertMessage:'"strings to match in" textarea'}];const o="http://localhost:8080/api/v1/requests/";function l(t){let e="",n=document.getElementById("resultsTableBody");for(let n=0;n<t.length;n++)e+=`<tr>\n                        <td>${t[n].StringToMatch}</td>\n                        <td>${t[n].StringMatched}</td>\n                        <td>${t[n].Result}</td>\n                    </tr>`;n.innerHTML+=e}async function a(t){let e=await async function(t){const e=await fetch(`${o}${t}/`,{headers:{"content-type":"application/json; charset=UTF-8"},method:"GET"});if(e.ok)return await e.json();throw{type:"Error",message:e.statusText,data:e.url,code:e.status}}(t);!0===e.ReturnedAllRows?l(e.Results):(l(e.Results),await a(t))}function c(){document.getElementById("resultsTableBody").innerHTML=""}function r(t){let e=document.getElementById("submitButton"),n=document.getElementById("submitButtonSpinner");"show"===t?(e.disabled=!1,n.style.display="none"):"hide"===t&&(e.disabled=!0,n.style.display="block")}function s(){(async function(){let t=null;try{t=await async function(){const t=await fetch("http://localhost:8080/api_documentation.md");if(t.ok)return await t.text();throw{type:"Error",message:t.statusText,data:t.url,code:t.status}}().then()}catch(t){return function(t){let e=document.getElementById("loadDocumentationErrorAlert");e.innerHTML=`Load Documentation error: ${t}`,e.style.display="block"}(JSON.stringify(t)),void _toggleLoadDocumentationErrorAlert("show")}var e,n;n=(e=t,(new showdown.Converter).makeHtml(e)),document.getElementById("apiDocumentationDiv").innerHTML=n})().catch()}window.addEventListener("load",(t=>{s()})),document.getElementById("submitButton").addEventListener("click",(function(){(async function(){t("hide"),document.getElementById("backendServiceErrorAlert").style.display="none",r("show");let l=function(){let t=function(){let t=[];return n.map((e=>{var n;0==(n=e.componentId,!(0===document.getElementById(n).value.length))&&t.push(e.componentNameForAlertMessage)})),t}();return t.length>0?t:[]}();if(l.length>0)return s=l,document.getElementById("mandatoryFieldsNotFilledAlert").innerHTML=`Mandatory fields not filled: ${s}`,void t("show");var s;let d=null;try{d=(await async function(){const t=document.getElementById("stringsToMatch").value,e=document.getElementById("stringsToMatchIn").value,n=document.getElementById("mode").value,l={headers:{"content-type":"application/json; charset=UTF-8"},body:JSON.stringify({stringsToMatch:t,stringsToMatchIn:e,mode:n}),method:"POST"},a=await fetch(o,l);if(a.ok)return await a.json();throw{type:"Error",message:a.statusText,data:a.url,code:a.status}}()).RequestID}catch(t){return void e(JSON.stringify(t))}r("hide"),c();try{await a(d)}catch(t){return void e(JSON.stringify(t))}document.getElementById("resultsDiv").style.display="block",r("show"),window.location.href="#results"})().catch()})),document.getElementById("clearStringsToMatchTextarea").addEventListener("click",(function(){document.getElementById("stringsToMatch").value=""})),document.getElementById("clearStringsToMatchInTextarea").addEventListener("click",(function(){document.getElementById("stringsToMatchIn").value=""})),document.getElementById("rangeInput").addEventListener("change",(function(){let t,e,n,o,l,a;for(t=document.getElementById("rangeInput").value,e=document.getElementById("resultsTable"),n=e.getElementsByTagName("tr"),l=0;l<n.length;l++)o=n[l].getElementsByTagName("td")[2],o&&(a=o.textContent||o.innerText,n[l].style.display=+a>=+t?"":"none")})),document.getElementById("copyResultsTableToClipboardButton").addEventListener("click",(function(){!function(){let t=new ClipboardJS(".btn");t.on("success",(function(t){t.clearSelection()})),t.on("error",(function(t){}))}()})),document.getElementById("downloadResultsTableAsCsvButton").addEventListener("click",(function(){!function(t){let e=[],n=document.querySelectorAll("table tr");for(let t=0;t<n.length;t++){let o=[],l=n[t].querySelectorAll("td, th");for(let t=0;t<l.length;t++)o.push(l[t].innerText);e.push(o.join(","))}!function(t,e){let n,o;n=new Blob([t],{type:"text/csv"}),o=document.createElement("a"),o.download=e,o.href=window.URL.createObjectURL(n),o.style.display="none",document.body.appendChild(o),o.click()}(e.join("\n"),t)}("fuzzy_match_results.csv")})),document.getElementById("clearResultsTableButton").addEventListener("click",(function(){c()}))})();