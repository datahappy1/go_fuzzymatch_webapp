(()=>{"use strict";function t(t){let e=document.getElementById("mandatoryFieldsNotFilledAlert");"show"===t?e.style.display="block":"hide"===t&&(e.style.display="none")}function e(t){let e=document.getElementById("backendServiceErrorAlert");"show"===t?e.style.display="block":"hide"===t&&(e.style.display="none")}function n(t){!function(t){let e=document.getElementById("backendServiceErrorAlert");e.innerHTML=`Backend service error: ${t}`,e.style.display="block"}(t),e("show")}const o=[{componentId:"stringsToMatch",componentNameForAlertMessage:'"strings to match" textarea'},{componentId:"stringsToMatchIn",componentNameForAlertMessage:'"strings to match in" textarea'}];function l(t){let e="",n=document.getElementById("resultsTableBody");for(let n=0;n<t.length;n++)e+=`<tr>\n                        <td>${t[n].StringToMatch}</td>\n                        <td>${t[n].StringMatched}</td>\n                        <td>${t[n].Result}</td>\n                    </tr>`;n.innerHTML+=e}async function a(t){let e=await async function(t){const e=await fetch(`true${t}/`,{headers:{"content-type":"application/json; charset=UTF-8"},method:"GET"});if(e.ok)return await e.json();throw{type:"Error",message:e.statusText,data:e.url,code:e.status}}(t);!0===e.ReturnedAllRows?l(e.Results):(l(e.Results),await a(t))}function c(t){document.getElementById(t).value=""}function s(){document.getElementById("resultsTableBody").innerHTML=""}function r(t){let e=document.getElementById("submitButton"),n=document.getElementById("submitButtonSpinner");"show"===t?(e.disabled=!1,n.style.display="none"):"hide"===t&&(e.disabled=!0,n.style.display="block")}function d(){(async function(){let t=null;try{t=await async function(){const t=await fetch(!1);if(t.ok)return await t.text();throw{type:"Error",message:t.statusText,data:t.url,code:t.status}}().then()}catch(t){return function(t){let e=document.getElementById("loadDocumentationErrorAlert");e.innerHTML=`Load Documentation error: ${t}`,e.style.display="block"}(JSON.stringify(t)),void(document.getElementById("loadDocumentationErrorAlert").style.display="block")}var e,n;n=(e=t,(new showdown.Converter).makeHtml(e)),document.getElementById("apiDocumentationDiv").innerHTML=n})().catch()}console.log(!0),console.log(!1),window.addEventListener("load",(t=>{d()})),document.getElementById("submitButton").addEventListener("click",(function(){(async function(){t("hide"),e("hide"),r("show");let l=function(){let t=function(){let t=[];return o.map((e=>{var n;0==(n=e.componentId,!(0===document.getElementById(n).value.length))&&t.push(e.componentNameForAlertMessage)})),t}();return t.length>0?t:[]}();if(l.length>0)return c=l,document.getElementById("mandatoryFieldsNotFilledAlert").innerHTML=`Mandatory fields not filled: ${c}`,void t("show");var c;let d=null;try{d=(await async function(){const t=document.getElementById("stringsToMatch").value,e=document.getElementById("stringsToMatchIn").value,n=document.getElementById("mode").value,o={headers:{"content-type":"application/json; charset=UTF-8"},body:JSON.stringify({stringsToMatch:t,stringsToMatchIn:e,mode:n}),method:"POST"},l=await fetch(!0,o);if(l.ok)return await l.json();throw{type:"Error",message:l.statusText,data:l.url,code:l.status}}()).RequestID}catch(t){return n(JSON.stringify(t)),void r("show")}r("hide"),s();try{await a(d)}catch(t){return void n(JSON.stringify(t))}document.getElementById("resultsDiv").style.display="block",r("show"),window.location.href="#results"})().catch()})),document.getElementById("clearStringsToMatchTextarea").addEventListener("click",(function(){c("stringsToMatch")})),document.getElementById("clearStringsToMatchInTextarea").addEventListener("click",(function(){c("stringsToMatchIn")})),document.getElementById("rangeInput").addEventListener("change",(function(){let t,e,n,o,l,a;for(t=document.getElementById("rangeInput").value,e=document.getElementById("resultsTable"),n=e.getElementsByTagName("tr"),l=0;l<n.length;l++)o=n[l].getElementsByTagName("td")[2],o&&(a=o.textContent||o.innerText,n[l].style.display=+a>=+t?"":"none")})),document.getElementById("copyResultsTableToClipboardButton").addEventListener("click",(function(){!function(){let t=new ClipboardJS(".btn");t.on("success",(function(t){t.clearSelection()})),t.on("error",(function(t){}))}()})),document.getElementById("downloadResultsTableAsCsvButton").addEventListener("click",(function(){!function(t){let e=[],n=document.querySelectorAll("table tr");for(let t=0;t<n.length;t++){let o=[],l=n[t].querySelectorAll("td, th");for(let t=0;t<l.length;t++)o.push(l[t].innerText);e.push(o.join(","))}!function(t,e){let n,o;n=new Blob([t],{type:"text/csv"}),o=document.createElement("a"),o.download=e,o.href=window.URL.createObjectURL(n),o.style.display="none",document.body.appendChild(o),o.click()}(e.join("\n"),t)}("fuzzy_match_results.csv")})),document.getElementById("clearResultsTableButton").addEventListener("click",(function(){s()}))})();